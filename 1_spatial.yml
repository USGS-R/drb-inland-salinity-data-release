target_default: 1_spatial

packages:
  - dplyr
  - meddle
  - rgdal
  - sf
  - zip

sources:
  - src/spatial_functions.R
  - src/fetch_filter_functions.R
  - src/file_functions.R

targets:
  1_spatial:
    depends:
      - out_data/XX_geospatial_area_WG84.zip
      - geospatial_area_metadata
  
  # create target of spatial file
  geospatial_area_WG84:
    command: read_spatial_file(path = 'in_data/example_data/drb_shp/physiographic_regions_DRB.shp', selected_crs = 4326)

  # grab metadata   
  geospatial_area_metadata:
    command: extract_feature(geospatial_area_WG84)
    
  # Output geospatial area shp
  out_data/XX_geospatial_area_WG84.zip:
    command: sf_to_zip(target_name,
      sf_object = geospatial_area_WG84,
      layer_name = I('geospatial_area_WG84'))
